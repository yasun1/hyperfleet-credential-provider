# Example kubeconfig for GCP/GKE with HyperFleet Cloud Provider
apiVersion: v1
kind: Config
clusters:
- name: my-gke-cluster
  cluster:
    # Replace with your GKE cluster endpoint
    server: https://35.123.45.67
    # Replace with your cluster CA certificate
    certificate-authority-data: LS0tLS1CRUdJTi1DRVJUSUZJQ0FURS0tLS0tCk1JSURDekNDQWZPZ0F3SUJBZ0lRYjJ...

users:
- name: gke-user
  user:
    exec:
      apiVersion: client.authentication.k8s.io/v1
      command: /usr/local/bin/hyperfleet-cloud-provider
      args:
      - get-token
      - --provider=gcp
      - --cluster-name=my-gke-cluster
      - --project-id=my-gcp-project
      # Optional: specify region
      # - --region=us-central1
      env:
      # Path to GCP service account JSON file
      - name: GOOGLE_APPLICATION_CREDENTIALS
        value: /vault/secrets/gcp-sa.json

contexts:
- name: my-gke-context
  context:
    cluster: my-gke-cluster
    user: gke-user
    # Optional: set default namespace
    # namespace: default

current-context: my-gke-context
