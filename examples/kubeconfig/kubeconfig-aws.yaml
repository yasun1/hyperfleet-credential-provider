# Example kubeconfig for AWS/EKS with HyperFleet Cloud Provider
apiVersion: v1
kind: Config
clusters:
- name: my-eks-cluster
  cluster:
    # Replace with your EKS cluster endpoint
    server: https://ABC123DEF456.gr7.us-east-1.eks.amazonaws.com
    # Replace with your cluster CA certificate
    certificate-authority-data: LS0tLS1CRUdJTi1DRVJUSUZJQ0FURS0tLS0tCk1JSURCVENDQWUyZ0F3SUJBZ0lJZW...

users:
- name: eks-user
  user:
    exec:
      apiVersion: client.authentication.k8s.io/v1
      command: /usr/local/bin/hyperfleet-credential-provider
      args:
      - get-token
      - --provider=aws
      - --cluster-name=my-eks-cluster
      - --region=us-east-1
      # Optional: specify AWS account ID
      # - --account-id=123456789012
      env:
      # AWS credentials file (INI format)
      # File should contain: [default] aws_access_key_id, aws_secret_access_key, region
      - name: AWS_CREDENTIALS_FILE
        value: /vault/secrets/aws-credentials

contexts:
- name: my-eks-context
  context:
    cluster: my-eks-cluster
    user: eks-user
    # Optional: set default namespace
    # namespace: default

current-context: my-eks-context
