# Example kubeconfig for Azure/AKS with HyperFleet Cloud Provider
apiVersion: v1
kind: Config
clusters:
- name: my-aks-cluster
  cluster:
    # Replace with your AKS cluster endpoint
    server: https://my-aks-dns-12345678.hcp.eastus.azmk8s.io:443
    # Replace with your cluster CA certificate
    certificate-authority-data: LS0tLS1CRUdJTi1DRVJUSUZJQ0FURS0tLS0tCk1JSURCakNDQWU2Z0F3SUJBZ0lCQV...

users:
- name: aks-user
  user:
    exec:
      apiVersion: client.authentication.k8s.io/v1
      command: /usr/local/bin/hyperfleet-cloud-provider
      args:
      - get-token
      - --provider=azure
      - --cluster-name=my-aks-cluster
      - --tenant-id=87654321-4321-4321-4321-210987654321
      - --subscription-id=12345678-1234-1234-1234-123456789012
      env:
      # Azure credentials file (JSON format)
      # File should contain: {"client_id": "...", "client_secret": "...", "tenant_id": "..."}
      - name: AZURE_CREDENTIALS_FILE
        value: /vault/secrets/azure-credentials.json

contexts:
- name: my-aks-context
  context:
    cluster: my-aks-cluster
    user: aks-user
    # Optional: set default namespace
    # namespace: default

current-context: my-aks-context
